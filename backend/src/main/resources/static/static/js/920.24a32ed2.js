"use strict";(self["webpackChunkstu_score_front"]=self["webpackChunkstu_score_front"]||[]).push([[920],{8920:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"myInfo"},[t("el-card",{staticClass:"admin-card"},[t("div",{staticClass:"header",attrs:{slot:"header",align:"center"},slot:"header"},[t("span",[e._v("班主任个人资料")])]),t("div",{staticClass:"content"},[t("div",{staticClass:"edit"},[t("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",round:""},on:{click:e.openEditTea}},[e._v("编辑 ")])],1),t("el-descriptions",{attrs:{title:"",border:"",column:e.column}},[t("el-descriptions-item",{attrs:{label:"身份"}},[e._v("班主任")]),t("el-descriptions-item",{attrs:{label:"班主任编号"}},[e._v(e._s(e.userInfo.teaId))]),t("el-descriptions-item",{attrs:{label:"班主任姓名"}},[e._v(e._s(e.userInfo.teaName))]),t("el-descriptions-item",{attrs:{label:"密码"}},[e._v(e._s(e.userInfo.teaPwd))]),t("el-descriptions-item",{attrs:{label:"年级"}},[e._v(e._s(e.userInfo.classYear))]),t("el-descriptions-item",{attrs:{label:"专业"}},[e._v(e._s(e.userInfo.majorName))]),t("el-descriptions-item",{attrs:{label:"班级"}},[e._v(e._s(e.userInfo.className))]),t("el-descriptions-item",{attrs:{label:"身份证"}},[e._v(e._s(e.userInfo.teaIdCard))]),t("el-descriptions-item",{attrs:{label:"注册时间"}},[e._v(e._s(e.userInfo.createTime))])],1)],1)]),t("div",{staticClass:"editDialog"},[t("el-dialog",{attrs:{title:"编辑班主任",visible:e.editFormVisible},on:{close:e.clearEditForm,"update:visible":function(t){e.editFormVisible=t}}},[t("el-form",{ref:"editRef",attrs:{model:e.editForm,rules:e.editRules}},[t("el-form-item",{attrs:{label:"账号","label-width":"150px",prop:"teaId"}},[t("el-input",{attrs:{disabled:""},model:{value:e.editForm.teaId,callback:function(t){e.$set(e.editForm,"teaId",t)},expression:"editForm.teaId"}})],1),t("el-form-item",{attrs:{label:"班主任姓名","label-width":"150px",prop:"teaName"}},[t("el-input",{attrs:{placeholder:"请输入班主任姓名"},model:{value:e.editForm.teaName,callback:function(t){e.$set(e.editForm,"teaName",t)},expression:"editForm.teaName"}})],1),t("el-form-item",{attrs:{label:"密码","label-width":"150px",prop:"teaPwd"}},[t("el-input",{attrs:{placeholder:"请输入密码",autocomplete:"off",clearable:"",type:"password"},model:{value:e.editForm.teaPwd,callback:function(t){e.$set(e.editForm,"teaPwd",t)},expression:"editForm.teaPwd"}})],1),t("el-form-item",{attrs:{label:"密码","label-width":"150px",prop:"teaPwd2"}},[t("el-input",{attrs:{placeholder:"请再次输入相同密码",autocomplete:"off",clearable:"",type:"password"},model:{value:e.editForm.teaPwd2,callback:function(t){e.$set(e.editForm,"teaPwd2",t)},expression:"editForm.teaPwd2"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelEdit}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.editTea}},[e._v("确 定")])],1)],1)],1)],1)},i=[],r=a(4161),l=a(7344),o={data(){let e=(e,t,a)=>{""===t?a(new Error("请再次输入相同密码")):t!==this.editForm.teaPwd?a(new Error("两次输入密码不一致!")):a()};return{column:2,editFormVisible:!1,userInfo:{classYear:"",teaName:"",teaPwd:"",createTime:""},editForm:{teaId:"",teaName:"",teaPwd:"",teaPwd2:""},editRules:{teaName:[{required:!0,message:"请输入班主任姓名",trigger:"blur"},{min:2,max:20,message:"姓名长度为2到20个字符",trigger:"blur"}],teaPwd:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:16,message:"密码长度为6到16个字符",trigger:"blur"}],teaPwd2:[{required:!0,message:"密码不能为空",trigger:"blur"},{validator:e,trigger:"blur"}]}}},created(){this.getTeaInfo()},methods:{getTeaInfo(){r.Z.get(l.Z.baseURL+"/teacher/getTeaById?teaId="+this.$store.state.userInfo.teaId,{headers:{Authorization:this.$store.state.token}}).then((e=>{"20000"==e.data.code?this.userInfo=e.data.data:this.$message.error(e.data.msg)}))},openEditTea(){this.editForm.teaId=this.userInfo.teaId,this.editForm.teaName=this.userInfo.teaName,this.editFormVisible=!0},clearEditForm(){this.editForm={},this.$set(this.editForm,"teaName",""),this.$refs.editRef.clearValidate()},cancelEdit(){this.editFormVisible=!1,this.clearEditForm(),this.$message.info("已取消编辑")},editTea(){this.$refs.editRef.validate((e=>{if(!e)return!1;r.Z.put(l.Z.baseURL+"/teacher/editById",this.editForm,{headers:{Authorization:this.$store.state.token}}).then((e=>{"20000"==e.data.code?(this.editFormVisible=!1,this.clearEditForm(),this.getTeaInfo(),this.$message.success("修改个人信息成功")):this.$message.error("修改个人信息失败")}))}))}}},d=o,n=a(3736),m=(0,n.Z)(d,s,i,!1,null,"5e55fc3b",null),c=m.exports},7344:function(e,t){const a={assertsSubDirectory:"static",assertsPublicPath:"/",baseURL:"http://118.31.60.230:8091",timeout:2e4,changeOrigin:!0};t["Z"]=a}}]);
//# sourceMappingURL=920.24a32ed2.js.map