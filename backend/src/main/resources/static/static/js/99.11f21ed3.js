"use strict";(self["webpackChunkstu_score_front"]=self["webpackChunkstu_score_front"]||[]).push([[99],{6099:function(t,e,s){s.r(e),s.d(e,{default:function(){return m}});var a=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"findAdd"},[e("el-input",{staticStyle:{width:"240px"},attrs:{autocomplete:"off",placeholder:"请输入学号",clearable:""},model:{value:t.stuId,callback:function(e){t.stuId=e},expression:"stuId"}}),e("el-input",{staticStyle:{width:"240px"},attrs:{autocomplete:"off",placeholder:"请输入学生姓名",clearable:""},model:{value:t.stuName,callback:function(e){t.stuName=e},expression:"stuName"}}),e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchStuList}},[t._v("搜索")]),e("el-button",{staticStyle:{"margin-left":"0"},attrs:{icon:"el-icon-refresh"},on:{click:t.resetStuList}},[t._v("刷新")])],1),e("div",{staticClass:"stuTable"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.stuScoreList,stripe:"",size:"small"}},[e("el-table-column",{attrs:{label:"排名",width:"40",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s((t.pageNum-1)*t.pageSize+e.$index+1)+" ")]}}])}),e("el-table-column",{attrs:{prop:"stuId",label:"学号",sortable:"",align:"center",width:"90"}}),e("el-table-column",{attrs:{prop:"stuName",label:"学生姓名",align:"center",sortable:"",width:"100"}}),e("el-table-column",{attrs:{prop:"className",align:"center",width:"180",label:"班级名称",sortable:""}}),t._l(t.courseList,(function(s,a){return e("el-table-column",{attrs:{prop:"",label:s.courseName,align:"center"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("span",[t._v(t._s(s.row.courseScore[a]))])]}}],null,!0)})})),e("el-table-column",{attrs:{prop:"scoreTotal",label:"必修课总分",sortable:"",align:"center"}}),e("el-table-column",{attrs:{prop:"handle",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.openMessage(s.row)}}},[t._v("私信")])]}}])})],2)],1),e("div",{staticClass:"page"},[e("el-pagination",{attrs:{"pager-count":11,background:"","current-page":t.pageNum,"page-size":t.pageSize,"page-sizes":[5,10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1),e("div",{staticClass:"msgDialog"},[e("el-dialog",{attrs:{title:"给学生发消息",visible:t.msgFormVisible},on:{close:t.clearMsgForm,"update:visible":function(e){t.msgFormVisible=e}}},[e("el-form",{ref:"msgRef",attrs:{model:t.msgForm,rules:t.msgRules}},[e("el-form-item",{attrs:{label:"学生姓名","label-width":"80px",prop:"stuName"}},[e("el-input",{attrs:{disabled:""},model:{value:t.msgForm.stuName,callback:function(e){t.$set(t.msgForm,"stuName",e)},expression:"msgForm.stuName"}})],1),e("el-form-item",{attrs:{label:"消息","label-width":"80px",prop:"msgContent"}},[e("el-input",{attrs:{placeholder:"请输入消息",autocomplete:"off",clearable:"",type:"textarea",rows:"5"},model:{value:t.msgForm.msgContent,callback:function(e){t.$set(t.msgForm,"msgContent",e)},expression:"msgForm.msgContent"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancelMsg}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.msgToStu}},[t._v("确 定")])],1)],1)],1),e("el-backtop",{attrs:{"visibility-height":200}},[e("div",{staticStyle:{"{\n      height":"100%",width:"100%","background-color":"#f2f5f6","box-shadow":"0 0 6px rgba(0,0,0, .30)","text-align":"center","line-height":"40px",color:"#1989fa"}},[t._v(" ↑ ")])])],1)},o=[],r=s(4161),i=s(7344),l={name:"ClassScore",data(){return{msgRules:{msgContent:[{required:!0,message:"消息不能为空",trigger:"blur"},{min:1,max:255,message:"消息长度为1到255个字符",trigger:"blur"}]},msgForm:{msgContent:""},msgFormVisible:!1,courseList:[],stuScoreList:[{courseScore:[]},{courseScore:[]},{courseScore:[]},{courseScore:[]}],pageNum:1,pageSize:20,stuId:"",stuName:"",className:"",total:0}},created(){this.getCourseList(),this.getStuScoreList()},methods:{msgToStu(t){this.$refs.msgRef.validate((t=>{if(!t)return!1;r.Z.post(i.Z.baseURL+"/stuMessage/addMsg",{stuId:this.msgForm.stuId,stuName:this.msgForm.stuName,teaId:this.$store.state.userInfo.teaId,msgContent:this.msgForm.msgContent},{headers:{Authorization:this.$store.state.token}}),r.Z.post(i.Z.baseURL+"/teaMessage/addMsg",{stuId:this.msgForm.stuId,stuName:this.msgForm.stuName,teaId:this.$store.state.userInfo.teaId,msgContent:this.msgForm.msgContent},{headers:{Authorization:this.$store.state.token}}).then((t=>{"20000"==t.data.code?(this.msgFormVisible=!1,this.clearMsgForm(),this.$message.success(t.data.msg)):this.$message.error(t.data.msg)}))}))},cancelMsg(){this.msgFormVisible=!1,this.clearMsgForm(),this.$message.info("已取消发消息")},clearMsgForm(){this.msgForm={},this.$set(this.msgForm,"msgContent",""),this.$refs.msgRef.clearValidate()},openMessage(t){this.msgFormVisible=!0,this.msgForm.stuId=t.stuId,this.msgForm.stuName=t.stuName},getStuScoreList(){r.Z.get(i.Z.baseURL+"/score/getStuScoreList?admissionYearMajor="+this.$store.state.userInfo.classYear+this.$store.state.userInfo.majorId+"&stuName="+this.stuName+"&pageSize="+this.pageSize+"&pageNum="+this.pageNum+"&stuId="+this.stuId+"&className="+this.$store.state.userInfo.classNo,{headers:{Authorization:this.$store.state.token}}).then((t=>{"20000"==t.data.code&&(this.stuScoreList=t.data.data.stuScoreList,this.total=t.data.data.total)}))},getCourseList(){r.Z.get(i.Z.baseURL+"/course/getScoreCourse?majorId="+this.$store.state.userInfo.majorId+"&admissionYear="+this.$store.state.userInfo.classYear,{headers:{Authorization:this.$store.state.token}}).then((t=>{"20000"==t.data.code&&(this.courseList=t.data.data)}))},resetStuList(){location.reload()},searchStuList(){this.pageNum=1,this.getStuScoreList()},handleCurrentChange(t){this.pageNum=t,this.getStuScoreList()},handleSizeChange(t){this.pageSize=t,this.pageNum=1,this.getStuScoreList()}}},n=l,u=s(3736),c=(0,u.Z)(n,a,o,!1,null,"6d3bf6d1",null),m=c.exports},7344:function(t,e){const s={assertsSubDirectory:"static",assertsPublicPath:"/",baseURL:"http://118.31.60.230:8091",timeout:2e4,changeOrigin:!0};e["Z"]=s}}]);
//# sourceMappingURL=99.11f21ed3.js.map