"use strict";(self["webpackChunkstu_score_front"]=self["webpackChunkstu_score_front"]||[]).push([[793],{6793:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});var a=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"findAdd"},[t("el-input",{staticStyle:{width:"240px"},attrs:{autocomplete:"off",placeholder:"请输入课程名",clearable:""},model:{value:e.courseName,callback:function(t){e.courseName=t},expression:"courseName"}}),t("el-input",{staticStyle:{width:"240px"},attrs:{autocomplete:"off",placeholder:"请输入专业名",clearable:""},model:{value:e.majorName,callback:function(t){e.majorName=t},expression:"majorName"}}),t("el-select",{attrs:{placeholder:"请选择开课时期",clearable:""},model:{value:e.coursePeriod,callback:function(t){e.coursePeriod=t},expression:"coursePeriod"}},e._l(e.coursePeriods,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1),t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchCourseList}},[e._v("搜索")]),t("el-button",{staticStyle:{"margin-left":"0"},attrs:{icon:"el-icon-refresh"},on:{click:e.resetCourseList}},[e._v("刷新")]),t("el-button",{staticStyle:{"margin-left":"70px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openAddCourseForm()}}},[e._v("新增课程")])],1),t("div",{staticClass:"classTable"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.courseList,stripe:"",size:"small","row-style":{height:"40px"}}},[t("el-table-column",{attrs:{label:"序号",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s((e.pageNum-1)*e.pageSize+t.$index+1)+" ")]}}])}),t("el-table-column",{attrs:{prop:"courseId",label:"课程编号",align:"center",width:"130",sortable:""}}),t("el-table-column",{attrs:{prop:"courseName",label:"课程名",align:"center",width:"150",sortable:""}}),t("el-table-column",{attrs:{prop:"majorName",label:"所属专业",align:"center",width:"200",sortable:""}}),t("el-table-column",{attrs:{prop:"ifDegree",label:"课程类型",width:"140",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(r){return[1==r.row.ifDegree?t("el-tag",[e._v("必修")]):0==r.row.ifDegree?t("el-tag",{attrs:{type:"success"}},[e._v("选修")]):e._e()]}}])}),t("el-table-column",{attrs:{prop:"coursePeriod",label:"开课时期",align:"center",width:"150",sortable:""}}),t("el-table-column",{attrs:{prop:"stuChooseNum",label:"选课人数",align:"center",width:"100",sortable:""}}),t("el-table-column",{attrs:{prop:"handle",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(t){return e.openEditCourseForm(r.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.delCourse(r.row)}}},[e._v("删除")])]}}])})],1)],1),t("div",{staticClass:"page"},[t("el-pagination",{attrs:{"pager-count":11,background:"","current-page":e.pageNum,"page-size":e.pageSize,"page-sizes":[5,10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),t("div",{staticClass:"addCourseDialog"},[t("el-dialog",{attrs:{title:"新增课程",visible:e.addFormVisible},on:{close:e.clearAddForm,"update:visible":function(t){e.addFormVisible=t}}},[t("el-form",{ref:"addFormRef",attrs:{model:e.addCourseForm,rules:e.addRules}},[t("el-form-item",{attrs:{label:"专业","label-width":"150px",prop:"majorName"}},[t("el-select",{attrs:{placeholder:"请选择专业",clearable:""},model:{value:e.addCourseForm.majorName,callback:function(t){e.$set(e.addCourseForm,"majorName",t)},expression:"addCourseForm.majorName"}},e._l(e.majorNames,(function(e){return t("el-option",{key:e.majorId,attrs:{label:e.majorName,value:e.majorName}})})),1)],1),t("el-form-item",{attrs:{label:"开课时期","label-width":"150px",prop:"coursePeriod"}},[t("el-select",{attrs:{placeholder:"请选择开课时期",clearable:""},model:{value:e.addCourseForm.coursePeriod,callback:function(t){e.$set(e.addCourseForm,"coursePeriod",t)},expression:"addCourseForm.coursePeriod"}},e._l(e.coursePeriods,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1)],1),t("el-form-item",{attrs:{label:"课程名","label-width":"150px",prop:"courseName"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入课程名",clearable:""},model:{value:e.addCourseForm.courseName,callback:function(t){e.$set(e.addCourseForm,"courseName",t)},expression:"addCourseForm.courseName"}})],1),t("el-form-item",{attrs:{label:"是否必修","label-width":"150px",prop:"ifDegree"}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.addCourseForm.ifDegree,callback:function(t){e.$set(e.addCourseForm,"ifDegree",t)},expression:"addCourseForm.ifDegree"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.cancelAddForm()}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addCourse()}}},[e._v("确 定")])],1)],1)],1),t("div",{staticClass:"editCourseDialog"},[t("el-dialog",{attrs:{title:"编辑课程",visible:e.editFormVisible},on:{close:e.clearEditForm,"update:visible":function(t){e.editFormVisible=t}}},[t("el-form",{ref:"editFormRef",attrs:{model:e.editCourseForm,rules:e.editRules}},[t("el-form-item",{attrs:{label:"课程编号","label-width":"150px",prop:"courseId"}},[t("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.editCourseForm.courseId,callback:function(t){e.$set(e.editCourseForm,"courseId",t)},expression:"editCourseForm.courseId"}})],1),t("el-form-item",{attrs:{label:"专业","label-width":"150px",prop:"majorName"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请选择专业",disabled:""},model:{value:e.editCourseForm.majorName,callback:function(t){e.$set(e.editCourseForm,"majorName",t)},expression:"editCourseForm.majorName"}})],1),t("el-form-item",{attrs:{label:"开课时期","label-width":"150px",prop:"coursePeriod"}},[t("el-select",{attrs:{placeholder:"请选择开课时期",clearable:""},model:{value:e.editCourseForm.coursePeriod,callback:function(t){e.$set(e.editCourseForm,"coursePeriod",t)},expression:"editCourseForm.coursePeriod"}},e._l(e.coursePeriods,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1)],1),t("el-form-item",{attrs:{label:"课程名","label-width":"150px",prop:"courseName"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入课程名",clearable:""},model:{value:e.editCourseForm.courseName,callback:function(t){e.$set(e.editCourseForm,"courseName",t)},expression:"editCourseForm.courseName"}})],1),t("el-form-item",{attrs:{label:"是否必修","label-width":"150px",prop:"ifDegree"}},[t("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.editCourseForm.ifDegree,callback:function(t){e.$set(e.editCourseForm,"ifDegree",t)},expression:"editCourseForm.ifDegree"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.cancelEditForm()}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editCourse()}}},[e._v("确 定")])],1)],1)],1),t("el-backtop",{attrs:{"visibility-height":200}},[t("div",{staticStyle:{"{\n      height":"100%",width:"100%","background-color":"#f2f5f6","box-shadow":"0 0 6px rgba(0,0,0, .30)","text-align":"center","line-height":"40px",color:"#1989fa"}},[e._v(" ↑ ")])])],1)},o=[],s=r(4161),i=r(7344),l={name:"CourseManage",data(){return{coursePeriod:"",courseName:"",majorName:"",pageNum:1,pageSize:50,total:0,addFormVisible:!1,editFormVisible:!1,courseList:[{courseId:"",courseName:"",majorName:"",coursePeriod:"",stuChooseNum:0,ifDegree:""}],addCourseForm:{},editCourseForm:{},addRules:{majorName:{required:!0,message:"请选择专业",trigger:"blur"},coursePeriod:{required:!0,message:"请选择开课时期",trigger:"blur"},courseName:[{required:!0,message:"请输入课程名",trigger:"blur"},{min:2,max:20,message:"课程长度为2到20个字符",trigger:"blur"}]},editRules:{coursePeriod:{required:!0,message:"请选择开课时期",trigger:"blur"},courseName:[{required:!0,message:"请输入课程名",trigger:"blur"},{min:2,max:20,message:"课程名长度为2到20个字符",trigger:"blur"}]},coursePeriods:[{value:"1",label:"大一上"},{value:"2",label:"大一下"},{value:"3",label:"大二上"},{value:"4",label:"大二下"},{value:"5",label:"大三上"},{value:"6",label:"大三下"},{value:"7",label:"大四上"},{value:"8",label:"大四下"}],majorNames:[]}},methods:{getCourseList(){s.Z.get(i.Z.baseURL+"/course/coursePageList?pageNum="+this.pageNum+"&pageSize="+this.pageSize+"&courseName="+this.courseName+"&majorName="+this.majorName+"&coursePeriod="+this.coursePeriod,{headers:{Authorization:this.$store.state.token}}).then((e=>{"20000"==e.data.code?(this.courseList=e.data.data.courseList,this.total=e.data.data.total):this.$message.error(e.data.msg)}))},searchCourseList(){this.pageNum=1,this.getCourseList()},resetCourseList(){location.reload()},openAddCourseForm(){this.addFormVisible=!0,s.Z.get(i.Z.baseURL+"/major/getAllMajorName",{headers:{Authorization:this.$store.state.token}}).then((e=>{this.majorNames=e.data.data}))},openEditCourseForm(e){e.stuChooseNum>0?this.$message.info("还有学生有该课,无法编辑"):s.Z.get(i.Z.baseURL+"/course/getCourseById?courseId="+e.courseId,{headers:{Authorization:this.$store.state.token}}).then((e=>{(e.data.code="20000")?(this.editFormVisible=!0,this.editCourseForm=e.data.data):this.$message.error(e.data.msg)}))},delCourse(e){e.stuChooseNum>0?this.$message.info("还有学生有该课，无法删除"):this.$confirm(`确认删除课程：${e.courseName} ？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((()=>{s.Z["delete"](i.Z.baseURL+"/course/delCourseById?courseId="+e.courseId,{headers:{Authorization:this.$store.state.token}}).then((e=>{"20000"==e.data.code?(this.getCourseList(),this.$message.success(e.data.msg)):this.$message.error(e.data.msg)}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},handleCurrentChange(e){this.pageNum=e,this.getCourseList()},handleSizeChange(e){this.pageSize=e,this.pageNum=1,this.getCourseList()},clearAddForm(){this.addCourseForm={},this.$refs.addFormRef.clearValidate()},clearEditForm(){this.addCourseForm={},this.$refs.editFormRef.clearValidate()},cancelAddForm(){this.addFormVisible=!1,this.$message.info("已取消新增")},cancelEditForm(){this.editFormVisible=!1,this.$message.info("已取消编辑")},addCourse(){this.$refs.addFormRef.validate((e=>{if(!e)return!1;s.Z.post(i.Z.baseURL+"/course/add",{coursePeriod:this.addCourseForm.coursePeriod,majorName:this.addCourseForm.majorName,courseName:this.addCourseForm.courseName,ifDegree:this.addCourseForm.ifDegree},{headers:{Authorization:this.$store.state.token}}).then((e=>{"20000"==e.data.code?(this.addFormVisible=!1,this.clearAddForm(),this.getCourseList(),this.$message.success(e.data.msg)):this.$message.error(e.data.msg)}))}))},editCourse(){this.$refs.editFormRef.validate((e=>{if(!e)return!1;s.Z.put(i.Z.baseURL+"/course/edit",{courseId:this.editCourseForm.courseId,coursePeriod:this.editCourseForm.coursePeriod,majorName:this.editCourseForm.majorName,courseName:this.editCourseForm.courseName,ifDegree:this.editCourseForm.ifDegree},{headers:{Authorization:this.$store.state.token}}).then((e=>{"20000"==e.data.code?(this.editFormVisible=!1,this.clearEditForm(),this.getCourseList(),this.$message.success(e.data.msg)):this.$message.error(e.data.msg)}))}))}},created(){this.getCourseList()}},u=l,d=r(3736),c=(0,d.Z)(u,a,o,!1,null,"10f6421e",null),m=c.exports},7344:function(e,t){const r={assertsSubDirectory:"static",assertsPublicPath:"/",baseURL:"http://118.31.60.230:8091",timeout:2e4,changeOrigin:!0};t["Z"]=r}}]);
//# sourceMappingURL=793.615b4229.js.map