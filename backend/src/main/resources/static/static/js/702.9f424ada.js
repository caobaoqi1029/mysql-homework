"use strict";(self["webpackChunkstu_score_front"]=self["webpackChunkstu_score_front"]||[]).push([[702],{9702:function(t,e,s){s.r(e),s.d(e,{default:function(){return m}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"myInfo"},[e("el-card",{staticClass:"admin-card"},[e("div",{staticClass:"header",attrs:{slot:"header",align:"center"},slot:"header"},[e("span",[t._v("学生个人资料")])]),e("div",{staticClass:"content"},[e("div",{staticClass:"edit"},[e("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",round:""},on:{click:t.openEditStu}},[t._v("编辑 ")])],1),e("el-descriptions",{attrs:{title:"",border:"",column:t.column}},[e("el-descriptions-item",{attrs:{label:"身份"}},[t._v("学生")]),e("el-descriptions-item",{attrs:{label:"学号"}},[t._v(t._s(t.userInfo.stuId))]),e("el-descriptions-item",{attrs:{label:"学生姓名"}},[t._v(t._s(t.userInfo.stuName))]),e("el-descriptions-item",{attrs:{label:"密码"}},[t._v(t._s(t.userInfo.stuPwd))]),e("el-descriptions-item",{attrs:{label:"入学年份"}},[t._v(t._s(t.userInfo.admissionYear))]),e("el-descriptions-item",{attrs:{label:"专业"}},[t._v(t._s(t.userInfo.majorName))]),e("el-descriptions-item",{attrs:{label:"班级"}},[t._v(t._s(t.userInfo.className))]),e("el-descriptions-item",{attrs:{label:"班主任姓名"}},[t._v(t._s(t.userInfo.teaName))]),e("el-descriptions-item",{attrs:{label:"身份证"}},[t._v(t._s(t.userInfo.stuIdCard))]),e("el-descriptions-item",{attrs:{label:"注册时间"}},[t._v(t._s(t.userInfo.createTime))])],1)],1)]),e("div",{staticClass:"editDialog"},[e("el-dialog",{attrs:{title:"编辑学生",visible:t.editFormVisible},on:{close:t.clearEditForm,"update:visible":function(e){t.editFormVisible=e}}},[e("el-form",{ref:"editForm",attrs:{model:t.editForm,rules:t.editRules}},[e("el-form-item",{attrs:{label:"账号","label-width":"150px",prop:"stuId"}},[e("el-input",{attrs:{disabled:""},model:{value:t.editForm.stuId,callback:function(e){t.$set(t.editForm,"stuId",e)},expression:"editForm.stuId"}})],1),e("el-form-item",{attrs:{label:"学生姓名","label-width":"150px",prop:"stuName"}},[e("el-input",{attrs:{placeholder:"请输入学生姓名"},model:{value:t.editForm.stuName,callback:function(e){t.$set(t.editForm,"stuName",e)},expression:"editForm.stuName"}})],1),e("el-form-item",{attrs:{label:"密码","label-width":"150px",prop:"stuPwd"}},[e("el-input",{attrs:{placeholder:"请输入密码",autocomplete:"off",clearable:"",type:"password"},model:{value:t.editForm.stuPwd,callback:function(e){t.$set(t.editForm,"stuPwd",e)},expression:"editForm.stuPwd"}})],1),e("el-form-item",{attrs:{label:"密码","label-width":"150px",prop:"stuPwd2"}},[e("el-input",{attrs:{placeholder:"请再次输入相同密码",autocomplete:"off",clearable:"",type:"password"},model:{value:t.editForm.stuPwd2,callback:function(e){t.$set(t.editForm,"stuPwd2",e)},expression:"editForm.stuPwd2"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancelEdit}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.editStu}},[t._v("确 定")])],1)],1)],1)],1)},r=[],a=s(4161),o=s(7344),l={data(){let t=(t,e,s)=>{""===e?s(new Error("请再次输入相同密码")):e!==this.editForm.stuPwd?s(new Error("两次输入密码不一致!")):s()};return{column:2,editFormVisible:!1,userInfo:{admissionYear:"",stuName:"",stuPwd:"",createTime:""},editForm:{stuId:"",stuName:"",stuPwd:"",stuPwd2:""},editRules:{stuName:[{required:!0,message:"请输入学生姓名",trigger:"blur"},{min:2,max:20,message:"姓名长度为2到20个字符",trigger:"blur"}],stuPwd:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:16,message:"密码长度为6到16个字符",trigger:"blur"}],stuPwd2:[{required:!0,message:"密码不能为空",trigger:"blur"},{validator:t,trigger:"blur"}]}}},created(){this.getStuInfo()},methods:{getStuInfo(){a.Z.get(o.Z.baseURL+"/student/getByStuId?stuId="+this.$store.state.userInfo.stuId,{headers:{Authorization:this.$store.state.token}}).then((t=>{"20000"==t.data.code?this.userInfo=t.data.data:this.$message.error(t.data.msg)}))},openEditStu(){this.editFormVisible=!0,this.editForm.stuId=this.userInfo.stuId,this.editForm.stuName=this.userInfo.stuName},clearEditForm(){this.editForm={},this.$set(this.editForm,"stuName",""),this.$refs.editForm.clearValidate()},cancelEdit(){this.editFormVisible=!1,this.clearEditForm(),this.$message.info("已取消编辑")},editStu(){this.$refs.editForm.validate((t=>{if(!t)return!1;a.Z.put(o.Z.baseURL+"/student/editByStuId",this.editForm,{headers:{Authorization:this.$store.state.token}}).then((t=>{"20000"==t.data.code?(this.getStuInfo(),this.$message.success("修改个人信息成功"),this.editFormVisible=!1,this.clearEditForm()):this.$message.error("修改个人信息失败")}))}))}}},d=l,u=s(3736),n=(0,u.Z)(d,i,r,!1,null,"4334a79b",null),m=n.exports},7344:function(t,e){const s={assertsSubDirectory:"static",assertsPublicPath:"/",baseURL:"http://118.31.60.230:8091",timeout:2e4,changeOrigin:!0};e["Z"]=s}}]);
//# sourceMappingURL=702.9f424ada.js.map